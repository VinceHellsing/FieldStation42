<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>About - FieldStation42</title>
    <link rel="stylesheet" href="https://unpkg.com/purecss@3.0.0/build/pure-min.css">
    <link rel="stylesheet" href="https://unpkg.com/purecss@3.0.0/build/grids-responsive-min.css">
    <link rel="stylesheet" id="theme-css" href="/static/themes/default.css">
    <script>
        // Theme management
        async function loadThemes() {
            try {
                const response = await fetch('/about/themes');
                const data = await response.json();
                const select = document.getElementById('theme-select');
                select.innerHTML = '';

                data.themes.forEach(theme => {
                    const option = document.createElement('option');
                    option.value = theme.id;
                    option.textContent = theme.name;
                    select.appendChild(option);
                });

                // Set the current theme
                const savedTheme = localStorage.getItem('fs42-theme') || 'default';
                select.value = savedTheme;
            } catch (e) {
                console.error('Error loading themes:', e);
            }
        }

        function initTheme() {
            const savedTheme = localStorage.getItem('fs42-theme') || 'default';
            setTheme(savedTheme);
            loadThemes();
        }

        function setTheme(themeName) {
            const themeLink = document.getElementById('theme-css');
            themeLink.href = `/static/themes/${themeName}.css`;
            localStorage.setItem('fs42-theme', themeName);
        }

        // Initialize page layout
        document.addEventListener('DOMContentLoaded', async function () {
            initTheme();

            const content = `
                <div class="pure-u-1 pure-u-md-1-2">
                    <h2>Application Settings</h2>
                    <div class="settings-section">
                        <h3>Theme Selection</h3>
                        <p>Choose your preferred visual theme for FieldStation42:</p>
                        <div class="theme-selector">
                            <select id="theme-select" class="pure-input-1-2" onchange="setTheme(this.value)">
                                <option>Loading themes...</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="pure-u-1" style="margin-top: 2em;">
                    <h2>About FieldStation42</h2>
                    <p>FieldStation42 is a modern system that simulates retro TV.</p>

                    <h3>Features</h3>
                    <ul>
                        <li>Multi-channel management</li>
                        <li>Content cataloging and organization</li>
                        <li>Schedule planning and automation</li>
                        <li>Real-time monitoring and control</li>
                    </ul>

                    <h3>System Information</h3>
                    <table class="pure-table pure-table-horizontal">
                        <tbody>
                            <tr>
                                <td><strong>Version</strong></td>
                                <td>0.1.0</td>
                            </tr>
                            <tr>
                                <td><strong>License</strong></td>
                                <td>Mozilla Public License</td>
                            </tr>
                            <tr>
                                <td><strong>Author</strong></td>
                                <td>Shane Mason</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            `;

            document.body.innerHTML = await window.fs42Common.createPageLayout('About FieldStation42', content);
            
            // Load themes after the HTML is inserted
            loadThemes();
        });
    </script>
</head>

<body>
    <script src="/static/fs42_client.js"></script>
    <script src="/static/common.js"></script>
</body>

</html>